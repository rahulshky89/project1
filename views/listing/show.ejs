<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= property.title %></title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/CSS/poddar.css">
</head>
<body>
 
<%- include("../includes/navbar.ejs") %>
<div class="container my-5">

  <div class="row">
    <!-- Image -->
    <div class="col-md-6">
      <img src="<%= property.images.length ? property.images[0] : 'https://via.placeholder.com/600x350?text=No+Image' %>"
        class="img-fluid rounded shadow-sm" alt="<%= property.title %>">
    </div>

    <!-- Details -->
    <div class="col-md-6">

      <h2 class="fw-bold mb-3"><%= property.title %></h2>

      <p><strong>Owner:</strong> <span class="text-primary"><%= property.owner %></span></p>

      <p><strong>Location:</strong> <%= property.location %></p>

      <p class="text-success fw-bold fs-5">₹<%= property.price %> / month</p>

      <p><strong>Guest Capacity:</strong> <%= property.guestsAllowed %> Persons</p>

      <p><strong>Amenities:</strong> <%= property.amenities.join(", ") %></p>

      <p><strong>Currently:</strong> 
        <% if(property.available) { %>
          <span class="badge bg-success">Available</span>
        <% } else { %>
          <span class="badge bg-danger">Booked</span>
        <% } %>
      </p>
       <form method="post" action="/get/<%=property._id%>">
        <div class="mb-3">
          <label for="password" class="form-label">Confirm Password to Book</label>
          <input type="password" name="password" id="password" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Book Now</button>
       </form>
      <!-- <a href="#" class="btn btn-secondary mt-3"></a> -->

    </div>
  </div>

</div>
  <hr>
<div class="col-8 offset-3">
  <h4>Leave Review</h4>

  <form method="POST" action="/list/<%=property._id%>/review" novalidate class="needs-validation">
    <div class="mb-3 mt-3">
      <label for="rating" class="form-label m">Rating</label>
      <input min="1" max="5" type="range" id="rating" name="review[rating]" class="form-range ">
    </div>
    <div class="mb-3 mt-3">
      <label for="comment" class="form-label">Comment</label>
      <textarea name="review[comment]" id="comment" cols="30" rows="3" class="form-control" required></textarea>
    </div>
    <button class="bt btn-outline-dark">Submit</button>
  </form>
</div>
<hr>
<%for(let i=0;i<property.reviews.length;i++){%>

 <div class="review-card">
    <h5 style="color:black">Comment: <%= property.reviews[i].comment %></h5>

    <% let rating = property.reviews[i].rating; %>

    <% if (rating == 1) { %>
        <div class="stars">⭐</div>
    <% } else if (rating == 2) { %>
        <div class="stars">⭐⭐</div>
    <% } else if (rating == 3) { %>
        <div class="stars">⭐⭐⭐</div>
    <% } else if (rating == 4) { %>
        <div class="stars">⭐⭐⭐⭐</div>
    <% } else if (rating == 5) { %>
        <div class="stars">⭐⭐⭐⭐⭐</div>
    <% } %>
</div>
<%}%>

 <%- include("../includes/footer.ejs") %>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/validation.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= property.title %></title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/CSS/poddar.css">
</head>
<body>
 
<%- include("../includes/navbar.ejs") %>

<div class="container my-5">

  <div class="row">

    <!-- Image -->
    <div class="col-md-6">
      <img src="<%= property.images.length ? property.images[0] : 'https://via.placeholder.com/600x350?text=No+Image' %>"
        class="img-fluid rounded shadow-sm" alt="<%= property.title %>">
    </div>

    <!-- Details -->
    <div class="col-md-6">

      <h2 class="fw-bold mb-3"><%= property.title %></h2>

      <p><strong>Owner:</strong> <span class="text-primary"><%= property.owner %></span></p>

      <p><strong>Location:</strong> <%= property.location %></p>

      <p class="text-success fw-bold fs-5">â‚¹<%= property.price %> / month</p>

      <p><strong>Guest Capacity:</strong> <%= property.guestsAllowed %> Persons</p>

      <p><strong>Amenities:</strong> <%= property.amenities.join(", ") %></p>

      <p><strong>Currently:</strong> 
        <% if(property.available) { %>
          <span class="badge bg-success">Available</span>
        <% } else { %>
          <span class="badge bg-danger">Booked</span>
        <% } %>
      </p>

      <a href="/explore" class="btn btn-secondary mt-3">Back to Explore</a>
      <a href="#" class="btn getbtn  mt-3" onclick="openpopup('<%=property._id%>')">Get</a>

      <!-- password check popup form -->
       <div id="passwordPopup" class="popup" style="display:none">
  <form id="passwordForm" method="POST">
    <h3>Confirm your password</h3>
    <input type="password" name="password" placeholder="Enter password" required>
    <br>
    <button type="submit" class="btn btn-success mt-2">Confirm</button>
    <button type="button" class="btn btn-secondary mt-2" onclick="closePopup()">Cancel</button>
  </form>
</div>
<!-- function for password popup apply -->
<script>
    function openpopup(property){
      const popup=document.getElementById("passwordPopup");
      popup.style.display="block";

      const form=document.getElementById("passwordForm");
      form.action=`/get/${property}`

    }

    function closePopup(){
      const popup=document.getElementById("passwordPopup");
      popup.style.display="none";
    }
</script>
    </div>
  </div>

</div>
 <%- include("../includes/footer.ejs") %>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
